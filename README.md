# Rick and Morty MCP Server

An MCP (Model Context Protocol) server that provides Claude Desktop with direct access to the [Rick and Morty GraphQL API](https://rickandmortyapi.com/graphql). Query characters, episodes, and locations from the Rick and Morty universe directly in your conversations.

## What This Does

This server acts as a bridge between Claude Desktop and the Rick and Morty API, allowing you to:
- Search for characters by name, status, species, type, or gender
- Look up episodes by name or episode code
- Find locations by name, type, or dimension
- Get detailed information about any character, episode, or location by ID
- Batch query multiple items at once

## Prerequisites

- **Node.js** v18 or higher
- **Claude Desktop** app installed
- **pnpm** (or npm/yarn)

## Installation

1. **Clone this repository:**
   ```bash
   git clone <repository-url>
   cd mcp-example
   ```

2. **Install dependencies:**
   ```bash
   pnpm install
   ```

3. **Build the server:**
   ```bash
   pnpm build
   ```

## Configuration

### Step 1: Find Your Claude Desktop Config

The config file location depends on your OS:

- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
- **Linux**: `~/.config/Claude/claude_desktop_config.json`

### Step 2: Add the Server

Edit `claude_desktop_config.json` and add this configuration:

```json
{
  "mcpServers": {
    "rick_and_morty": {
      "command": "node",
      "args": [
        "/absolute/path/to/mcp-example/build/stdio-server.js"
      ]
    }
  }
}
```

**Important**: Replace `/absolute/path/to/mcp-example` with your actual project path.

#### Finding Your Path

Run this in your project directory:
```bash
pwd
```

Example result: `/Users/yourname/projects/mcp-example`

Your config would then be:
```json
{
  "mcpServers": {
    "rick_and_morty": {
      "command": "node",
      "args": [
        "/Users/yourname/projects/mcp-example/build/stdio-server.js"
      ]
    }
  }
}
```

### Step 3: Restart Claude Desktop

Completely quit and restart Claude Desktop (not just close the window).

### Step 4: Verify

1. Open Claude Desktop
2. Look for the ðŸ”Œ icon in the bottom-right
3. Click it to see your connected MCP servers
4. "rick_and_morty" should be listed

## Usage

Once connected, you can ask Claude questions about Rick and Morty data:

**Example questions:**
- "Find all characters named Rick"
- "Show me character ID 1"
- "What episodes are in season 1?"
- "Find all alive human characters"
- "What's the Citadel of Ricks location?"
- "Which characters appear in episode S01E01?"
- "List all dimensions in the show"

Claude will use the MCP server to query the Rick and Morty API and provide results.

## Available Queries

### Characters
- **character** - Get a single character by ID
- **characters** - List characters with filters (name, status, species, type, gender)
- **charactersByIds** - Get multiple characters by their IDs

**Character data includes:** name, status, species, type, gender, origin, current location, image URL, and episodes

### Episodes
- **episode** - Get a single episode by ID
- **episodes** - List episodes with filters (name, episode code like "S01E01")
- **episodesByIds** - Get multiple episodes by their IDs

**Episode data includes:** name, air date, episode code, and character list

### Locations
- **location** - Get a single location by ID
- **locations** - List locations with filters (name, type, dimension)
- **locationsByIds** - Get multiple locations by their IDs

**Location data includes:** name, type, dimension, and residents

### Pagination

List queries support pagination. Results return info about:
- Total count
- Number of pages
- Next/previous page numbers

## Development

### Testing

```bash
pnpm test              # Run all tests
pnpm test:watch        # Watch mode
pnpm test:coverage     # With coverage
```

### MCP Inspector

Test the server independently using the MCP Inspector:

```bash
pnpm dev:stdio         # Test with STDIO transport
```

This opens a web interface where you can test queries without Claude Desktop.

### Project Structure

```
src/
  server.ts            # Main MCP server implementation
  stdio-server.ts      # STDIO transport for Claude Desktop
  config.json          # Example configuration
build/                 # Compiled JavaScript (generated by pnpm build)
```

## Troubleshooting

### Server Not Showing Up

1. **Verify the config file location** - Make sure you edited the right `claude_desktop_config.json`
2. **Use absolute paths** - Relative paths like `./build/stdio-server.js` won't work
3. **Check the build** - Ensure `build/stdio-server.js` exists by running `pnpm build`
4. **Fully restart Claude** - Quit the app completely, don't just close the window
5. **Check logs** - Look for errors in Claude's logs:
   - macOS: `~/Library/Logs/Claude/`
   - Windows: `%APPDATA%\Claude\logs\`
   - Linux: `~/.config/Claude/logs/`

### Tools Not Working

1. **Verify Node version** - Run `node --version` (should be v18+)
2. **Rebuild** - Run `pnpm install && pnpm build`
3. **Test independently** - Run `pnpm dev:stdio` to test without Claude

### Permission Issues

If you get permission errors:
```bash
chmod +x build/stdio-server.js
```

## API Notes

- **No authentication required** - The Rick and Morty API is completely free
- **Read-only** - This API only supports queries (no mutations)
- **Rate limits** - The API may throttle excessive requests
- **Filter limitations** - Some fields like origin and current location can't be filtered via the API and must be filtered client-side

## License

MIT

## Resources

- [Model Context Protocol](https://modelcontextprotocol.io)
- [Rick and Morty API](https://rickandmortyapi.com)
- [Claude Desktop](https://claude.ai/desktop)
